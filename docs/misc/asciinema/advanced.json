{"version": 2, "width": 80, "height": 24, "timestamp": 1645356182, "env": {"SHELL": "/bin/bash", "TERM": "vt100"}}
[0.002011, "o", "exit\r\n"]
[0.635792, "o", "spawn /bin/sh\r\r\r\n"]
[0.639531, "o", "$ "]
[0.640164, "o", "# For the pro users, here are some advanced features of borg, so you can impress your friends. ;)\r\r\n$ "]
[0.640672, "o", "# Note: This screencast was made with borg 1.1.0b6 – older or newer borg versions may behave differently.\r\r\n$ "]
[0.641221, "o", "\r\r\n$ "]
[0.641809, "o", "# First of all, we can use several environment variables for borg.\r\r\n$ "]
[0.64253, "o", "# E.g. we do not want to type in our repo path and password again and again…\r\r\n$ "]
[0.643104, "o", "export BORG_REPO='/media/backup/borgdemo'\r\r\n$ "]
[0.643897, "o", "export BORG_PASSPHRASE='1234'\r\r\n$ "]
[0.644485, "o", "# Problem solved, borg will use this automatically… :)\r\r\n$ "]
[0.645015, "o", "# We'll use this right away…\r\r\n$ "]
[0.645616, "o", "\r\r\n$ "]
[0.646245, "o", "## ADVANCED CREATION ##\r\r\n$ "]
[0.646852, "o", "\r\r\n$ "]
[0.647574, "o", "# We can also use some placeholders in our archive name…\r\r\n$ "]
[0.648801, "o", "borg create --stats --progress --compression lz4 ::{user}-{now} Wallpaper\r\r\n"]
[1.545187, "o", "0 B O 0 B C 0 B D 0 N Wallpaper                                                 \r"]
[1.546348, "o", "Initializing cache transaction: Reading config                                  \r"]
[1.547316, "o", "Initializing cache transaction: Reading chunks                                  \r"]
[1.548183, "o", "Initializing cache transaction: Reading files                                   \r"]
[1.548968, "o", "                                                                                \r"]
[1.557882, "o", "Compacting segments   0%                                                        \r"]
[1.558995, "o", "Compacting segments  50%                                                        \r"]
[1.559726, "o", "                                                                                \r"]
[1.565039, "o", "Saving chunks cache                                                             \r"]
[1.565914, "o", "Saving cache config                                                             \r"]
[1.56832, "o", "                                                                                \r                                                                                \r"]
[1.569083, "o", "------------------------------------------------------------------------------\r\r\n"]
[1.569379, "o", "Archive name: root-2022-02-20T11:23:04\r\r\n"]
[1.569715, "o", "Archive fingerprint: 7281d93704e63cd4808a41efe2d1ae6511e80c1c819cbeb210029124cd487202\r\r\n"]
[1.57006, "o", "Time (start): Sun, 2022-02-20 11:23:04\r\r\n"]
[1.570575, "o", "Time (end):   Sun, 2022-02-20 11:23:04\r\r\n"]
[1.571106, "o", "Duration: 0.01 seconds\r\r\n"]
[1.571993, "o", "Number of files: 0\r\r\nUtilization of max. archive size: 0%\r\r\n------------------------------------------------------------------------------"]
[1.572255, "o", "\r\r\n"]
[1.572671, "o", "                       Original size      Compressed size    Deduplicated size\r\r\n"]
[1.573299, "o", "This archive:                  567 B                604 B                604 B\r\r\n"]
[1.573679, "o", "All archives:                  567 B                604 B                604 B\r\r\n"]
[1.574358, "o", "\r\r\n"]
[1.574824, "o", "                       Unique chunks         Total chunks\r"]
[1.575277, "o", "\r\n"]
[1.575742, "o", "Chunk index:                       2                    2\r\r\n------------------------------------------------------------------------------\r\r\n"]
[1.645063, "o", "$ "]
[1.645962, "o", "# Notice the backup name.\r\r\n"]
[1.646195, "o", "$ "]
[1.646638, "o", "\r\r\n$ "]
[1.647006, "o", "# And we can put completely different data, with different backup settings, in our backup. It will be deduplicated, anyway:\r\r\n$ borg create --stats --progress --compression zlib,6 --exclude ~/Downloads/big ::{user}-{now} ~/Downloads\r\r\n"]
[2.57776, "o", "0 B O 0 B C 0 B D 0 N root/Downloads                                            \r"]
[2.578959, "o", "Initializing cache transaction: Reading config                                  \r"]
[2.579804, "o", "Initializing cache transaction: Reading chunks                                  \r"]
[2.580584, "o", "Initializing cache transaction: Reading files                                   \r"]
[2.581286, "o", "                                                                                \r"]
[2.589849, "o", "Compacting segments   0%                                                        \r"]
[2.590754, "o", "Compacting segments  50%                                                        \r"]
[2.591266, "o", "                                                                                \r"]
[2.597327, "o", "Saving chunks cache                                                             \r"]
[2.598403, "o", "Saving cache config                                                             \r"]
[2.60062, "o", "                                                                                \r"]
[2.601015, "o", "                                                                                \r"]
[2.601599, "o", "------------------------------------------------------------------------------\r\r\nArchive name: root-2022-02-20T11:23:05"]
[2.601888, "o", "\r"]
[2.60199, "o", "\r\nArchive fingerprint: e604b04d3d94898219c894546b28cd9f42a063b0a084fdd713340a77a8b61796\r\r\nTime (start): Sun, 2022-02-20 11:23:05"]
[2.60234, "o", "\r\r\nTime (end):   Sun, 2022-02-20 11:23:05\r\r\nDuration: 0.01 seconds\r\r\nNumber of files: 0\r\r\n"]
[2.602746, "o", "Utilization of max. archive size: 0%\r\r\n------------------------------------------------------------------------------\r\r\n                       Original size      Compressed size    Deduplicated size\r\r\n"]
[2.603268, "o", "This archive:                  611 B                630 B                630 B\r\r\nAll archives:                1.18 kB              1.23 kB              1.23 kB\r\r\n\r\r\n                       Unique chunks         Total chunks\r\r\nChunk index:                       4                    4\r\r\n------------------------------------------------------------------------------\r\r\n"]
[2.67087, "o", "$ "]
[2.671144, "o", "\r"]
[2.671414, "o", "\r\n$ "]
[2.671595, "o", "# Or let's backup a device via STDIN.\r\r\n"]
[2.671887, "o", "$ "]
[2.672474, "o", "sudo dd if=/dev/loop0 bs=10M | borg create --progress --stats ::specialbackup -\r\r\n"]
[3.688565, "o", "Initializing cache transaction: Reading config                                  \r"]
[3.689852, "o", "Initializing cache transaction: Reading chunks                                  \r"]
[3.693136, "o", "Initializing cache transaction: Reading files                                   \r"]
[3.695305, "o", "                                                                                \r"]
[3.712857, "o", "8.39 MB O 32.95 kB C 32.95 kB D 0 N stdin                                       \r"]
[3.929833, "o", "33.55 MB O 131.80 kB C 32.95 kB D 0 N stdin                                     \r"]
[4.143304, "o", "58.72 MB O 230.65 kB C 32.95 kB D 0 N stdin                                     \r"]
[4.376485, "o", "83.89 MB O 329.50 kB C 32.95 kB D 0 N stdin                                     \r"]
[4.638678, "o", "109.05 MB O 428.35 kB C 32.95 kB D 0 N stdin                                    \r"]
[4.850728, "o", "134.22 MB O 527.20 kB C 32.95 kB D 0 N stdin                                    \r"]
[5.09042, "o", "159.38 MB O 626.05 kB C 32.95 kB D 0 N stdin                                    \r"]
[5.308336, "o", "184.55 MB O 724.90 kB C 32.95 kB D 0 N stdin                                    \r"]
[5.574728, "o", "209.72 MB O 823.75 kB C 32.95 kB D 0 N stdin                                    \r"]
[5.801513, "o", "234.88 MB O 922.60 kB C 32.95 kB D 0 N stdin                                    \r"]
[6.028526, "o", "260.05 MB O 1.02 MB C 32.95 kB D 0 N stdin                                      \r"]
[6.285239, "o", "285.21 MB O 1.12 MB C 32.95 kB D 0 N stdin                                      \r"]
[6.53761, "o", "310.38 MB O 1.22 MB C 32.95 kB D 0 N stdin                                      \r"]
[6.766458, "o", "335.54 MB O 1.32 MB C 32.95 kB D 0 N stdin                                      \r"]
[7.005467, "o", "360.71 MB O 1.42 MB C 32.95 kB D 0 N stdin                                      \r"]
[7.244904, "o", "385.88 MB O 1.52 MB C 32.95 kB D 0 N stdin                                      \r"]
[7.513872, "o", "411.04 MB O 1.61 MB C 32.95 kB D 0 N stdin                                      \r"]
[7.563888, "o", "40+0 records in"]
[7.564315, "o", "\r\r\n"]
[7.564795, "o", "40+0 records out"]
[7.565345, "o", "\r\r\n"]
[7.565997, "o", "419430400 bytes (419 MB, 400 MiB) copied, 4.88398 s, 85.9 MB/s"]
[7.566427, "o", "\r\r\n"]
[7.597707, "o", "Compacting segments   0%                                                        \r"]
[7.599013, "o", "Compacting segments  50%                                                        \r"]
[7.599405, "o", "                                                                                \r"]
[7.605333, "o", "Saving chunks cache                                                             \r"]
[7.606194, "o", "Saving cache config                                                             \r"]
[7.608344, "o", "                                                                                \r"]
[7.608724, "o", "                                                                                \r"]
[7.609373, "o", "------------------------------------------------------------------------------"]
[7.609593, "o", "\r\r\n"]
[7.610001, "o", "Archive name: specialbackup"]
[7.61004, "o", "\r\r\n"]
[7.610326, "o", "Archive fingerprint: 6d31e707abb8c3cc851f94ccb25eb2c47dca8aa28a9b9b564530360f5e9a1d61"]
[7.610538, "o", "\r\r\n"]
[7.610874, "o", "Time (start): Sun, 2022-02-20 11:23:06"]
[7.611102, "o", "\r\r\n"]
[7.611789, "o", "Time (end):   Sun, 2022-02-20 11:23:10"]
[7.612055, "o", "\r\r\n"]
[7.61242, "o", "Duration: 3.99 seconds"]
[7.612655, "o", "\r\r\n"]
[7.612994, "o", "Number of files: 1"]
[7.613225, "o", "\r\r\n"]
[7.613603, "o", "Utilization of max. archive size: 0%"]
[7.613849, "o", "\r\r\n"]
[7.614244, "o", "------------------------------------------------------------------------------"]
[7.614502, "o", "\r\r\n"]
[7.614878, "o", "                       Original size      Compressed size    Deduplicated size"]
[7.615109, "o", "\r\r\n"]
[7.615575, "o", "This archive:              419.43 MB              1.65 MB             33.60 kB"]
[7.615795, "o", "\r\r\n"]
[7.616139, "o", "All archives:              419.43 MB              1.65 MB             34.84 kB"]
[7.616332, "o", "\r\r\n"]
[7.616675, "o", "\r\r\n"]
[7.616995, "o", "                       Unique chunks         Total chunks"]
[7.617203, "o", "\r\r\n"]
[7.617519, "o", "Chunk index:                       7                   56"]
[7.61775, "o", "\r\r\n"]
[7.618068, "o", "------------------------------------------------------------------------------"]
[7.618295, "o", "\r\r\n"]
[7.673141, "o", "$ "]
[7.673486, "o", "\r\r\n$ "]
[7.673728, "o", "# Let's continue with some simple things:\r\r\n$ "]
[7.673996, "o", "## USEFUL COMMANDS ##\r\r\n$ "]
[7.674232, "o", "# You can show some information about an archive. You can even do it without needing to specify the archive name:\r\r\n$ "]
[7.674541, "o", "borg info :: --last 1\r\r\n"]
[8.426814, "o", "Archive name: specialbackup\r\r\nArchive fingerprint: 6d31e707abb8c3cc851f94ccb25eb2c47dca8aa28a9b9b564530360f5e9a1d61\r\r\nComment: \r\r\nHostname: bullseye\r\r\nUsername: root\r\r\nTime (start): Sun, 2022-02-20 11:23:06\r\r\nTime (end): Sun, 2022-02-20 11:23:10\r\r\nDuration: 3.99 seconds\r\r\nNumber of files: 1\r\r\nCommand line: borg create --progress --stats ::specialbackup -\r\r\nUtilization of max. archive size: 0%\r\r\n------------------------------------------------------------------------------\r\r\n                       Original size      Compressed size    Deduplicated size\r\r\nThis archive:              419.43 MB              1.65 MB             33.60 kB\r\r\nAll archives:              419.43 MB              1.65 MB             34.84 kB\r\r\n\r\r\n                       Unique chunks         Total chunks\r\r\nChunk index:                       7                   56\r\r\n"]
[8.485076, "o", "$ "]
[8.485682, "o", "\r\r\n$ "]
[8.486351, "o", "# So let's rename our last archive:\r\r\n$ "]
[8.486837, "o", "borg rename ::specialbackup backup-block-device\r\r\n"]
[9.297616, "o", "$ "]
[9.298188, "o", "\r\r\n$ "]
[9.298592, "o", "borg info :: --last 1\r\r\n"]
[10.489546, "o", "Archive name: backup-block-device\r\r\nArchive fingerprint: 54d287fdeac2e2f8d508d46d1cb3655c0ff30edb2bd94a61bd31009f2aafc54c\r\r\nComment: \r\r\nHostname: bullseye\r\r\nUsername: root\r\r\nTime (start): Sun, 2022-02-20 11:23:06\r\r\nTime (end): Sun, 2022-02-20 11:23:10\r\r\nDuration: 3.99 seconds\r\r\nNumber of files: 1\r\r\nCommand line: borg create --progress --stats ::specialbackup -\r\r\nUtilization of max. archive size: 0%\r\r\n------------------------------------------------------------------------------\r\r\n                       Original size      Compressed size    Deduplicated size\r\r\nThis archive:              419.43 MB              1.65 MB             33.62 kB\r\r\nAll archives:              419.43 MB              1.65 MB             34.85 kB\r\r\n\r\r\n                       Unique chunks         Total chunks\r\r\nChunk index:                       7                   56\r\r\n"]
[10.545131, "o", "$ \r\r\n$ "]
[10.545357, "o", "# A very important step if you choose keyfile mode (where the keyfile is only saved locally) is to export your keyfile and possibly print it, etc.\r\r\n$ "]
[10.545727, "o", "borg key export :: --qr-html file.html  # this creates a nice HTML, but when you want something simpler…\r\r\n"]
[11.069325, "o", "usage: borg [-V] [-h] [--critical] [--error] [--warning] [--info] [--debug]\r\r\n            [--debug-topic TOPIC] [-p] [--log-json] [--lock-wait N]\r\r\n            [--show-version] [--show-rc] [--no-files-cache] [--umask M]\r\r\n            [--remote-path PATH] [--remote-ratelimit rate]\r\r\n            [--consider-part-files] [--debug-profile FILE]\r\r\n            <command> ...\r\r\n"]
[11.069407, "o", "borg: error: unrecognized arguments: file.html\r\r\n"]
[11.124096, "o", "$ "]
[11.12457, "o", "borg key export :: --paper  # this is a \"manual input\"-only backup (but it is also included in the --qr-code option)\r\r\n"]
[12.383179, "o", "To restore key use borg key import --paper /path/to/repo\r\r\n\r\r\nBORG PAPER KEY v1\r\r\nid: 20 / 8d4ad0 3d2b74 913fce / 803504 c89959 - 27\r\r\n 1: 86a961 6c676f 726974 686da6 736861 323536 - 14\r\r\n 2: a46461 7461da 00deb5 1833d0 97f894 a2269a - fc\r\r\n 3: ec5224 8afcf7 4c52a0 7bfbfb d65705 2ef985 - 95\r\r\n 4: 3cd174 9fa1a9 49f168 8290eb f4d6d5 979947 - a6\r\r\n 5: ad48ae 08326e b582e9 dcb6c9 38129f ed35da - 6c\r\r\n 6: 51997c 474f64 a093b6 503b29 3dae2f d2a5a2 - 07\r\r\n 7: 6e697d ab16fb 9feada fbbff7 37caab f2a2d8 - bb\r\r\n 8: 420f5a 3d4d17 c0abea 11a6bb e903fc 553942 - 28\r\r\n 9: e1f8ed 6d072a e8330c eadbb3 47c0b9 c43d02 - 2c\r\r\n10: 92e794 662482 340441 95736c de24de 6a27c3 - 17\r\r\n11: d8823e ae4f3e 8e762d 5230c5 afc59f 9452a6 - 6f\r\r\n12: 8ae366 f92b08 d04588 4f09c2 bb3fff 677b6e - 83\r\r\n13: 0e59dc 44f304 1b72b3 b268f5 b377af d6ff9d - 13\r\r\n14: b4ca4e 5966ac 4b0626 153640 1c5fa4 686173 - e1\r\r\n15: 68da00 20bce5 88fdc7 b5e1f9 48983f 66bc6c - 2f\r\r\n16: 43b241 e224cd 471b5e 7e1c24 d5361d 2cbb62 - 74\r\r\n17: aa6974 657261 74696f 6e73ce 000186 a0"]
[12.383277, "o", "a473 - 15\r\r\n18: 616c74 da0020 2c89d2 85e547 055ba4 4d3aae - 36\r\r\n19: 5fbcab 41c6e7 f72d03 704bc9 6462bb 4e8465 - 02\r\r\n20: 8da9a7 766572 73696f 6e01 - b8\r\r\n\r\r\n"]
[12.438424, "o", "$ \r\r\n$ "]
[12.438498, "o", "## MAINTENANCE ##\r\r\n$ "]
[12.439103, "o", "# Sometimes backups get broken or we want a regular \"checkup\" that everything is okay…\r\r\n"]
[12.439382, "o", "$ "]
[12.439632, "o", "borg check -v ::\r\r\n"]
[13.071561, "o", "Starting repository check\r\r\n"]
[13.075811, "o", "Starting repository index check\r\r\nCompleted repository check, no problems found.\r\r\n"]
[13.076063, "o", "Starting archive consistency check...\r\r\n"]
[13.170336, "o", "Analyzing archive root-2022-02-20T11:23:04 (1/3)\r\r\n"]
[13.175226, "o", "Analyzing archive root-2022-02-20T11:23:05 (2/3)\r\r\n"]
[13.176436, "o", "Analyzing archive backup-block-device (3/3)\r\r\n"]
[13.17775, "o", "Archive consistency check complete, no problems found.\r\r\n"]
[13.232494, "o", "$ "]
[13.232805, "o", "\r\r\n$ "]
[13.233015, "o", "# Next problem: Usually you do not have infinite disk space. So you may need to prune your archive…\r\r\n$ # You can tune this in every detail. See the docs for details. Here only a simple example:\r\r\n"]
[13.233447, "o", "$ "]
[13.233568, "o", "borg prune --list --keep-last 1 --dry-run\r\r\n"]
[14.010245, "o", "Keeping archive: backup-block-device                  Sun, 2022-02-20 11:23:06 [54d287fdeac2e2f8d508d46d1cb3655c0ff30edb2bd94a61bd31009f2aafc54c]\r\r\n"]
[14.010877, "o", "Would prune:     root-2022-02-20T11:23:05             Sun, 2022-02-20 11:23:05 [e604b04d3d94898219c894546b28cd9f42a063b0a084fdd713340a77a8b61796]\r\r\nWould prune:     root-2022-02-20T11:23:04             Sun, 2022-02-20 11:23:04 [7281d93704e63cd4808a41efe2d1ae6511e80c1c819cbeb210029124cd487202]\r\r\n"]
[14.068892, "o", "$ "]
[14.069493, "o", "# When actually executing it in a script, you have to use it without the --dry-run option, of course.\r\r\n$ "]
[14.070044, "o", "\r\r\n$ "]
[14.070493, "o", "## RESTORE ##\r\r\n$ "]
[14.07097, "o", "\r\r\n$ "]
[14.071409, "o", "# When you want to see the diff between two archives use this command.\r\r\n$ "]
[14.071737, "o", "# E.g. what happened between the first two backups?\r\r\n$ "]
[14.072032, "o", "borg diff ::backup1 backup2\r\r\n"]
[14.857435, "o", "Archive backup1 does not exist\r\r\n"]
[14.919142, "o", "$ "]
[14.919629, "o", "# Ah, we added a file, right…\r\r\n$ \r\r\n$ "]
[14.920086, "o", "# There are also other ways to extract the data.\r\r\n$ "]
[14.92055, "o", "# E.g. as a tar archive.\r\r\n$ "]
[14.920821, "o", "borg export-tar --progress ::backup2 backup.tar.gz\r\r\n"]
[15.847681, "o", "Archive backup2 does not exist\r\r\n"]
[15.90415, "o", "$ "]
[15.904946, "o", "ls -l\r\r\n"]
[15.906985, "o", "total 448216\r\r\ndrwxr-xr-x 2 root root      4096 Feb 20 11:23 Wallpaper\r\r\n-rw-r--r-- 1 root root  13173712 Dec  7 21:44 borg-linux64\r\r\n-rw-r--r-- 1 root root  13173712 Dec  7 21:44 borg-linux64.1\r\r\n-rw-r--r-- 1 root root  13173712 Dec  7 21:44 borg-linux64.2\r\r\n-rw-r--r-- 1 root root       819 Dec  7 21:44 borg-linux64.asc\r\r\n-rw-r--r-- 1 root root 419430400 Feb 20 11:23 loopbackfile.img\r\r\n-rw-r--r-- 1 root root         0 Feb 20 11:14 wget-log\r\r\n"]
[15.907544, "o", "$ "]
[15.907745, "o", "\r\r\n"]
[15.908085, "o", "$ "]
[15.90847, "o", "# You can mount an archive or even the whole repository:\r\r\n"]
[15.908611, "o", "$ "]
[15.909043, "o", "mkdir /tmp/mount\r\r\n"]
[15.911521, "o", "$ "]
[15.912284, "o", "borg mount :: /tmp/mount\r\r\n"]
[16.856348, "o", "$ "]
[16.856853, "o", "ls -la /tmp/mount\r\r\n"]
[16.862563, "o", "total 4\r\r\ndrwxr-xr-x  1 root root    0 Feb 20 11:23 .\r\r\ndrwxrwxrwt 11 root root 4096 Feb 20 11:23 ..\r\r\ndrwxr-xr-x  1 root root    0 Feb 20 11:23 backup-block-device\r\r\ndrwxr-xr-x  1 root root    0 Feb 20 11:23 root-2022-02-20T11:23:04\r\r\ndrwxr-xr-x  1 root root    0 Feb 20 11:23 root-2022-02-20T11:23:05\r\r\n"]
[16.862961, "o", "$ "]
[16.863364, "o", "borg umount /tmp/mount\r\r\n"]
[18.021658, "o", "$ "]
[18.022307, "o", "\r\r\n"]
[18.022809, "o", "$ "]
[18.023338, "o", "# That's it, but of course there is more to explore, so have a look at the docs.\r\r\n$ "]
