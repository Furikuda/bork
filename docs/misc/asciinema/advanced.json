{"version": 2, "width": 80, "height": 24, "timestamp": 1645357971, "env": {"SHELL": "/bin/bash", "TERM": "vt100"}}
[0.594837, "o", "spawn /bin/sh\r\r\r\n"]
[0.598228, "o", "$ "]
[0.598532, "o", "# For the pro users, here are some advanced features of borg, so you can impress your friends. ;)\r\r\n$ "]
[0.598701, "o", "# Note: This screencast was made with borg 1.1.0b6 – older or newer borg versions may behave differently.\r\r\n"]
[0.598897, "o", "$ "]
[0.599121, "o", "\r\r\n$ "]
[0.599316, "o", "# First of all, we can use several environment variables for borg.\r\r\n$ "]
[0.599523, "o", "# E.g. we do not want to type in our repo path and password again and again…\r\r\n$ "]
[0.599721, "o", "export BORG_REPO='/media/backup/borgdemo'\r\r\n$ "]
[0.599931, "o", "export BORG_PASSPHRASE='1234'\r\r\n$ "]
[0.600172, "o", "# Problem solved, borg will use this automatically… :)\r\r\n$ "]
[0.600352, "o", "# We'll use this right away…\r\r\n$ "]
[0.600553, "o", "\r\r\n$ "]
[0.600724, "o", "## ADVANCED CREATION ##\r\r\n$ "]
[0.600938, "o", "\r\r\n$ "]
[0.601147, "o", "# We can also use some placeholders in our archive name…\r\r\n$ "]
[0.601401, "o", "borg create --stats --progress --compression lz4 ::{user}-{now} Wallpaper\r\r\n"]
[1.348708, "o", "0 B O 0 B C 0 B D 0 N Wallpaper                                                 \r"]
[1.349493, "o", "Initializing cache transaction: Reading config                                  \r"]
[1.350365, "o", "Initializing cache transaction: Reading chunks                                  \r"]
[1.35106, "o", "Initializing cache transaction: Reading files                                   \r"]
[1.351687, "o", "                                                                                \r"]
[1.361549, "o", "Compacting segments   0%                                                        \r"]
[1.362448, "o", "Compacting segments  50%                                                        \r"]
[1.363211, "o", "                                                                                \r"]
[1.368712, "o", "Saving chunks cache                                                             \r"]
[1.369541, "o", "Saving cache config                                                             \r"]
[1.372029, "o", "                                                                                \r"]
[1.37255, "o", "                                                                                \r"]
[1.373322, "o", "------------------------------------------------------------------------------\r\r\n"]
[1.373789, "o", "Archive name: root-2022-02-20T11:52:52\r\r\nArchive fingerprint: e77b73f6d2e7a80e0d5fed84f5257e7b1b0d6a91bab7aceeed3df4e5d5a4af01\r\r\n"]
[1.374231, "o", "Time (start): Sun, 2022-02-20 11:52:53\r\r\n"]
[1.374886, "o", "Time (end):   Sun, 2022-02-20 11:52:53\r\r\n"]
[1.375354, "o", "Duration: 0.01 seconds\r\r\n"]
[1.375844, "o", "Number of files: 0\r\r\nUtilization of max. archive size: 0%\r\r\n"]
[1.37647, "o", "------------------------------------------------------------------------------\r\r\n"]
[1.376924, "o", "                       Original size      Compressed size    Deduplicated size\r\r\n"]
[1.377332, "o", "This archive:                  567 B                609 B                609 B\r\r\n"]
[1.377977, "o", "All archives:                  567 B                609 B                609 B\r\r\n"]
[1.378425, "o", "\r\r\n"]
[1.378926, "o", "                       Unique chunks         Total chunks\r\r\n"]
[1.379376, "o", "Chunk index:                       2                    2\r\r\n"]
[1.379911, "o", "------------------------------------------------------------------------------\r\r\n"]
[1.445221, "o", "$ "]
[1.445469, "o", "# Notice the backup name.\r\r\n$ \r\r\n$ "]
[1.445933, "o", "# And we can put completely different data, with different backup settings, in our backup. It will be deduplicated, anyway:\r\r\n$ "]
[1.446236, "o", "borg create --stats --progress --compression zlib,6 --exclude ~/Downloads/big ::{user}-{now} ~/Downloads\r\r\n"]
[2.179266, "o", "0 B O 0 B C 0 B D 0 N root/Downloads                                            \r"]
[2.180274, "o", "Initializing cache transaction: Reading config                                  \r"]
[2.181033, "o", "Initializing cache transaction: Reading chunks                                  \r"]
[2.182003, "o", "Initializing cache transaction: Reading files                                   \r"]
[2.182796, "o", "                                                                                \r"]
[2.192525, "o", "Compacting segments   0%                                                        \r"]
[2.193469, "o", "Compacting segments  50%                                                        \r"]
[2.193973, "o", "                                                                                \r"]
[2.19988, "o", "Saving chunks cache                                                             \r"]
[2.200768, "o", "Saving cache config                                                             \r"]
[2.202936, "o", "                                                                                \r"]
[2.203342, "o", "                                                                                \r"]
[2.204177, "o", "------------------------------------------------------------------------------\r\r\n"]
[2.204518, "o", "Archive name: root-2022-02-20T11:52:53\r\r\nArchive fingerprint: 75501a46eae40b846cd871953fc4a5fc703bcee7f27f2de6e569d5b0806ab233\r\r\n"]
[2.204806, "o", "Time (start): Sun, 2022-02-20 11:52:53\r\r\n"]
[2.205195, "o", "Time (end):   Sun, 2022-02-20 11:52:53\r\r\n"]
[2.20563, "o", "Duration: 0.01 seconds\r\r\n"]
[2.206014, "o", "Number of files: 0\r\r\n"]
[2.206511, "o", "Utilization of max. archive size: 0%\r\r\n"]
[2.207019, "o", "------------------------------------------------------------------------------\r\r\n"]
[2.207448, "o", "                       Original size      Compressed size    Deduplicated size\r\r\n"]
[2.207906, "o", "This archive:                  611 B                634 B                634 B"]
[2.208321, "o", "\r\r\n"]
[2.208698, "o", "All archives:                1.18 kB              1.24 kB              1.24 kB\r\r\n"]
[2.210199, "o", "\r\r\n"]
[2.210588, "o", "                       Unique chunks         Total chunks\r\r\n"]
[2.211042, "o", "Chunk index:                       4                    4\r\r\n"]
[2.211589, "o", "------------------------------------------------------------------------------\r\r\n"]
[2.272589, "o", "$ "]
[2.272918, "o", "\r\r\n"]
[2.273124, "o", "$ "]
[2.273443, "o", "# Or let's backup a device via STDIN.\r\r\n$ "]
[2.274055, "o", "sudo dd if=/dev/loop0 bs=10M | borg create --progress --stats ::specialbackup -\r\r\n"]
[3.524127, "o", "Initializing cache transaction: Reading config                                  \r"]
[3.524762, "o", "Initializing cache transaction: Reading chunks                                  \r"]
[3.525707, "o", "Initializing cache transaction: Reading files                                   \r"]
[3.526534, "o", "                                                                                \r"]
[3.537554, "o", "8.39 MB O 32.95 kB C 32.95 kB D 0 N stdin                                       \r"]
[3.757047, "o", "33.55 MB O 131.80 kB C 32.95 kB D 0 N stdin                                     \r"]
[3.967764, "o", "58.72 MB O 230.65 kB C 32.95 kB D 0 N stdin                                     \r"]
[4.197647, "o", "83.89 MB O 329.50 kB C 32.95 kB D 0 N stdin                                     \r"]
[4.402809, "o", "109.05 MB O 428.35 kB C 32.95 kB D 0 N stdin                                    \r"]
[4.609824, "o", "134.22 MB O 527.20 kB C 32.95 kB D 0 N stdin                                    \r"]
[4.828766, "o", "159.38 MB O 626.05 kB C 32.95 kB D 0 N stdin                                    \r"]
[5.035256, "o", "184.55 MB O 724.90 kB C 32.95 kB D 0 N stdin                                    \r"]
[5.252718, "o", "209.72 MB O 823.75 kB C 32.95 kB D 0 N stdin                                    \r"]
[5.461472, "o", "234.88 MB O 922.60 kB C 32.95 kB D 0 N stdin                                    \r"]
[5.665572, "o", "260.05 MB O 1.02 MB C 32.95 kB D 0 N stdin                                      \r"]
[5.888179, "o", "285.21 MB O 1.12 MB C 32.95 kB D 0 N stdin                                      \r"]
[6.15803, "o", "318.77 MB O 1.25 MB C 32.95 kB D 0 N stdin                                      \r"]
[6.417346, "o", "352.32 MB O 1.38 MB C 32.95 kB D 0 N stdin                                      \r"]
[6.633846, "o", "377.49 MB O 1.48 MB C 32.95 kB D 0 N stdin                                      \r"]
[6.835129, "o", "402.65 MB O 1.58 MB C 32.95 kB D 0 N stdin                                      \r"]
[6.969223, "o", "40+0 records in\r\r\n40+0 records out\r\r\n419430400 bytes (419 MB, 400 MiB) copied, 4.68425 s, 89.5 MB/s\r\r\n"]
[6.977491, "o", "Compacting segments   0%                                                        \r"]
[6.978724, "o", "Compacting segments  50%                                                        \r"]
[6.979439, "o", "                                                                                \r"]
[6.988871, "o", "Saving chunks cache                                                             \r"]
[6.990014, "o", "Saving cache config                                                             \r"]
[6.992529, "o", "                                                                                \r"]
[6.993176, "o", "                                                                                \r"]
[6.993991, "o", "------------------------------------------------------------------------------\r\r\n"]
[6.994356, "o", "Archive name: specialbackup\r\r\n"]
[6.995013, "o", "Archive fingerprint: 0d15b393c9f283f837ca4e5809c47844925be29768402597a4d6be849a89cc5e\r\r\nTime (start): Sun, 2022-02-20 11:52:55\r\r\nTime (end):   Sun, 2022-02-20 11:52:58\r\r\nDuration: 3.51 seconds\r\r\nNumber of files: 1"]
[6.995455, "o", "\r\r\n"]
[6.996171, "o", "Utilization of max. archive size: 0%\r\r\n"]
[6.996451, "o", "------------------------------------------------------------------------------\r\r\n                       Original size      Compressed size    Deduplicated size\r\r\nThis archive:              419.43 MB              1.65 MB             33.60 kB\r\r\nAll archives:              419.43 MB              1.65 MB             34.84 kB\r\r\n"]
[6.997204, "o", "\r\r\n                       Unique chunks         Total chunks\r\r\nChunk index:                       7                   56\r\r\n------------------------------------------------------------------------------\r\r\n"]
[7.063082, "o", "$ "]
[7.063411, "o", "\r\r\n"]
[7.063654, "o", "$ "]
[7.063968, "o", "# Let's continue with some simple things:\r\r\n$ "]
[7.064294, "o", "## USEFUL COMMANDS ##\r\r\n$ "]
[7.064595, "o", "# You can show some information about an archive. You can even do it without needing to specify the archive name:\r\r\n$ "]
[7.065029, "o", "borg info :: --last 1\r\r\n"]
[7.802353, "o", "Archive name: specialbackup\r\r\nArchive fingerprint: 0d15b393c9f283f837ca4e5809c47844925be29768402597a4d6be849a89cc5e\r\r\nComment: \r\r\nHostname: bullseye\r\r\nUsername: root\r\r\nTime (start): Sun, 2022-02-20 11:52:55\r\r\nTime (end): Sun, 2022-02-20 11:52:58\r\r\nDuration: 3.51 seconds\r\r\nNumber of files: 1\r\r\nCommand line: borg create --progress --stats ::specialbackup -\r\r\nUtilization of max. archive size: 0%\r\r\n------------------------------------------------------------------------------\r\r\n                       Original size      Compressed size    Deduplicated size\r\r\nThis archive:              419.43 MB              1.65 MB             33.60 kB\r\r\nAll archives:              419.43 MB              1.65 MB             34.84 kB\r\r\n\r\r\n                       Unique chunks         Total chunks\r\r\nChunk index:                       7                   56\r\r\n"]
[7.871303, "o", "$ "]
[7.872125, "o", "\r\r\n$ "]
[7.872398, "o", "# So let's rename our last archive:\r\r\n$ "]
[7.872589, "o", "borg rename ::specialbackup backup-block-device\r\r\n"]
[8.68015, "o", "$ "]
[8.680963, "o", "\r\r\n$ "]
[8.681341, "o", "borg info :: --last 1\r\r\n"]
[9.417953, "o", "Archive name: backup-block-device\r\r\nArchive fingerprint: 61083530f48f1d3a131d8d5314eb2b7db43f5e8791f209eb881782675b0fca1b\r\r\nComment: \r\r\nHostname: bullseye\r\r\nUsername: root\r\r\nTime (start): Sun, 2022-02-20 11:52:55\r\r\nTime (end): Sun, 2022-02-20 11:52:58\r\r\nDuration: 3.51 seconds\r\r\nNumber of files: 1\r\r\nCommand line: borg create --progress --stats ::specialbackup -\r\r\nUtilization of max. archive size: 0%\r\r\n------------------------------------------------------------------------------\r\r\n                       Original size      Compressed size    Deduplicated size\r\r\nThis archive:              419.43 MB              1.65 MB             33.62 kB\r\r\nAll archives:              419.43 MB              1.65 MB             34.86 kB\r\r\n\r\r\n                       Unique chunks         Total chunks\r\r\nChunk index:                       7                   56"]
[9.418529, "o", "\r\r\n"]
[9.482841, "o", "$ "]
[9.483577, "o", "\r\r\n"]
[9.483791, "o", "$ "]
[9.484389, "o", "# A very important step if you choose keyfile mode (where the keyfile is only saved locally) is to export your keyfile and possibly print it, etc.\r\r\n$ borg key export :: --qr-html file.html  # this creates a nice HTML, but when you want something simpler…\r\r\n"]
[10.011157, "o", "usage: borg [-V] [-h] [--critical] [--error] [--warning] [--info] [--debug]\r\r\n            [--debug-topic TOPIC] [-p] [--log-json] [--lock-wait N]\r\r\n            [--show-version] [--show-rc] [--no-files-cache] [--umask M]\r\r\n            [--remote-path PATH] [--remote-ratelimit rate]\r\r\n            [--consider-part-files] [--debug-profile FILE]\r\r\n            <command> ...\r\r\n"]
[10.011826, "o", "borg: error: unrecognized arguments: file.html\r\r\n"]
[10.073321, "o", "$ "]
[10.074105, "o", "borg key export :: --paper  # this is a \"manual input\"-only backup (but it is also included in the --qr-code option)\r\r\n"]
[10.715266, "o", "To restore key use borg key import --paper /path/to/repo\r\r\n\r\r\nBORG PAPER KEY v1\r\r\nid: 20 / 8fffb3 1062bd e1697e / 3d0f0c 900c2e - d6\r\r\n 1: 86a961 6c676f 726974 686da6 736861 323536 - 14\r\r\n 2: a46461 7461da 00dee5 449b5e 9ec1f3 e7adf2 - 85\r\r\n 3: 7d13d0 218444 a534e3 b7d593 e86c00 116f36 - f1\r\r\n 4: dbb47b 5da76c ff2df0 37c2c8 5e2b81 39e401 - b2\r\r\n 5: bcd4f4 0671ee eaf53e dafd32 62a9e7 1aa4b5 - 90\r\r\n 6: b81138 c0a627 af40c2 a7a036 849403 86d5fb - 46\r\r\n 7: 95f8bd 6585ca ccd218 b2d1bc 387164 54147d - e6\r\r\n 8: 341b60 8ec120 860eb3 12c1b8 9cd3b6 210077 - 8e\r\r\n 9: 414559 57300a 7bb9bf 6569bd bd52d6 152f00 - 82\r\r\n10: 39df9b 09b85e c4599d 7723de c10f63 938676 - b9\r\r\n11: 606adf a3b247 3f3860 fe1c89 804c91 5f9eb8 - aa\r\r\n12: 09534a b7f8dc a318cc 958dd0 8ce831 e41248 - d1\r\r\n13: 642bd3 76c3ad 987e4e 67b9ea 4ec774 4b261e - 8f\r\r\n14: 174698 8cd916 404890 e941be f03ca4 686173 - 08\r\r\n15: 68da00 202353 b557d4 5e7a59 49bbcd 78f1a7 - 80\r\r\n16: 8e5b93 38e44b 2701d0 74f3bf 19148e 85fa43 - ca\r\r\n17: aa6974 657261 74696f 6e73ce 000186 a0"]
[10.715338, "o", "a473 - 15\r\r\n18: 616c74 da0020 220bd4 38ae78 78cb79 c8c334 - a0\r\r\n19: 8c76fd 593e36 887da7 57e656 b79e9e a7a107 - 7d\r\r\n20: cf2ea7 766572 73696f 6e01 - 7c\r\r\n\r\r\n"]
[10.780597, "o", "$ "]
[10.781268, "o", "\r\r\n$ "]
[10.78159, "o", "## MAINTENANCE ##\r\r\n$ "]
[10.782029, "o", "# Sometimes backups get broken or we want a regular \"checkup\" that everything is okay…\r\r\n$ "]
[10.782414, "o", "borg check -v ::\r\r\n"]
[11.638793, "o", "Starting repository check\r\r\n"]
[11.642682, "o", "Starting repository index check\r\r\n"]
[11.643158, "o", "Completed repository check, no problems found."]
[11.644148, "o", "\r\r\nStarting archive consistency check...\r\r\n"]
[11.746938, "o", "Analyzing archive root-2022-02-20T11:52:52 (1/3)\r\r\n"]
[11.751698, "o", "Analyzing archive root-2022-02-20T11:52:53 (2/3)\r\r\n"]
[11.752977, "o", "Analyzing archive backup-block-device (3/3)\r\r\n"]
[11.754407, "o", "Archive consistency check complete, no problems found.\r\r\n"]
[11.819239, "o", "$ "]
[11.819588, "o", "\r\r\n$ "]
[11.819983, "o", "# Next problem: Usually you do not have infinite disk space. So you may need to prune your archive…\r\r\n$ # You can tune this in every detail. See the docs for details. Here only a simple example:\r\r\n$ "]
[11.820517, "o", "borg prune --list --keep-last 1 --dry-run\r\r\n"]
[12.584917, "o", "Keeping archive: backup-block-device                  Sun, 2022-02-20 11:52:55 [61083530f48f1d3a131d8d5314eb2b7db43f5e8791f209eb881782675b0fca1b]\r\r\nWould prune:     root-2022-02-20T11:52:53             Sun, 2022-02-20 11:52:53 [75501a46eae40b846cd871953fc4a5fc703bcee7f27f2de6e569d5b0806ab233]"]
[12.585156, "o", "\r\r\n"]
[12.586134, "o", "Would prune:     root-2022-02-20T11:52:52             Sun, 2022-02-20 11:52:53 [e77b73f6d2e7a80e0d5fed84f5257e7b1b0d6a91bab7aceeed3df4e5d5a4af01]\r\r\n"]
[12.651806, "o", "$ "]
[12.652134, "o", "# When actually executing it in a script, you have to use it without the --dry-run option, of course.\r\r\n$ "]
[12.652368, "o", "\r\r\n"]
[12.65277, "o", "$ ## RESTORE ##\r\r\n$ "]
[12.65353, "o", "\r\r\n$ "]
[12.654836, "o", "# When you want to see the diff between two archives use this command.\r\r\n$ # E.g. what happened between the first two backups?\r\r\n"]
[12.655555, "o", "$ borg diff ::backup1 backup2\r\r\n"]
[13.397856, "o", "Archive backup1 does not exist\r\r\n"]
[13.461457, "o", "$ "]
[13.46206, "o", "# Ah, we added a file, right…\r\r\n"]
[13.462395, "o", "$ "]
[13.462789, "o", "\r\r\n$ # There are also other ways to extract the data.\r\r\n"]
[13.463165, "o", "$ "]
[13.46364, "o", "# E.g. as a tar archive.\r\r\n$ borg export-tar --progress ::backup2 backup.tar.gz\r\r\n"]
[14.449917, "o", "Archive backup2 does not exist\r\r\n"]
[14.514443, "o", "$ ls -l\r\r\n"]
[14.516485, "o", "total 473960\r\r\ndrwxr-xr-x 2 root root      4096 Feb 20 11:23 Wallpaper\r\r\n-rw-r--r-- 1 root root  13173712 Dec  7 21:44 borg-linux64\r\r\n-rw-r--r-- 1 root root  13173712 Dec  7 21:44 borg-linux64.1\r\r\n-rw-r--r-- 1 root root  13173712 Dec  7 21:44 borg-linux64.2\r\r\n"]
[14.51669, "o", "-rw-r--r-- 1 root root  13173712 Dec  7 21:44 borg-linux64.3\r\r\n-rw-r--r-- 1 root root  13173712 Dec  7 21:44 borg-linux64.4\r\r\n-rw-r--r-- 1 root root       819 Dec  7 21:44 borg-linux64.asc\r\r\n-rw-r--r-- 1 root root       819 Dec  7 21:44 borg-linux64.asc.1\r\r\n-rw-r--r-- 1 root root       819 Dec  7 21:44 borg-linux64.asc.2\r\r\n-rw-r--r-- 1 root root 419430400 Feb 20 11:52 loopbackfile.img\r\r\n-rw-r--r-- 1 root root         0 Feb 20 11:14 wget-log\r\r\n-rw-r--r-- 1 root root         0 Feb 20 11:40 wget-log.1\r\r\n"]
[14.517489, "o", "$ "]
[14.518125, "o", "\r\r\n$ # You can mount an archive or even the whole repository:\r\r\n"]
[14.51858, "o", "$ mkdir /tmp/mount\r\r\n"]
[14.520177, "o", "mkdir: cannot create directory ‘/tmp/mount’: File exists\r\r\n"]
[14.520803, "o", "$ borg mount :: /tmp/mount\r\r\n"]
[15.259609, "o", "$ ls -la /tmp/mount\r\r\n"]
[15.264614, "o", "total 4\r\r\ndrwxr-xr-x  1 root root    0 Feb 20 11:53 .\r\r\ndrwxrwxrwt 11 root root 4096 Feb 20 11:53 ..\r\r\ndrwxr-xr-x  1 root root    0 Feb 20 11:53 backup-block-device\r\r\ndrwxr-xr-x  1 root root    0 Feb 20 11:53 root-2022-02-20T11:52:52\r\r\ndrwxr-xr-x  1 root root    0 Feb 20 11:53 root-2022-02-20T11:52:53\r\r\n"]
[15.265374, "o", "$ borg umount /tmp/mount\r\r\n"]
[16.046274, "o", "$ \r\r\n"]
[16.047059, "o", "$ "]
[16.047118, "o", "# That's it, but of course there is more to explore, so have a look at the docs.\r\r\n"]
[16.047415, "o", "$ "]
